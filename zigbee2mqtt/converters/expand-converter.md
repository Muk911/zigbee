# Расширение существующего конвертера Z2M #
Во многих случаях добавление поддержки нового устройства в Z2M заключается в расширении списка моделей в "отпечатке пальцев" (fingerprint) определения устройства в файле конвертера. 
В некоторых случаях конвертер может быть реализован заимствованием частей кода из библиотеки [zigbee-herdsman-converters](https://github.com/Koenkk/zigbee-herdsman-converters).
И совсем редко конвертер разрабатывается полностью с нуля.

В данной статье описаны подходы, позволяющие разработать внешний конвертер Z2M на основе существующего конвертера, путем замены отдельных частей кода конвертера.

## Добавление расширение Fingerprint ##
Многие китайские производители выпускают обновления существующих моделей устройств с другими значениями производителя и модели устройства. Если функционально устройство не менялось, достаточно подготовить файл внешнего конвертера, расширяющий список моделей для существующего определения устройства.

Первым шагом необходимо получить ссылку на определение (definition) существующего устройства, которое подходит для нашего нового устройства.
Это можно сделать несколькими способами, например так:
```
const zhc = require('zigbee-herdsman-converters');
const baseDefinition = zhc.definitions.find((d) => d.model === 'BHT-002-GCLZB');
```
или так:
```
const zhc = require('zigbee-herdsman-converters');
const baseDefinition = zhc.findByModel('BHT-002-GCLZB');
```
Теперь необходимо создать новое определение устройства на основе базового определения. Следующее присвоение создает копию базового определения. 
```
const definition = {...baseDefinition};
```
Благодаря оператору расширения (...) копируется не ссылка, а вся структура определения, что позволяет производить модификацию любых элементов нового определения, не затрагивая исходное определение.
